---
import ScrollButton from "./ScrollButton.astro"
---

<section
  class="bg-[url('/hero-bg.png')] h-screen relative bg-no-repeat bg-cover"
>
  <svg class="sketch" data-reverse="true" width="2" height="691" viewBox="0 0 2 691" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M1 691L1 345" stroke="#FFD700" stroke-width="2"/>
  </svg>
    
  <div class="mask absolute inset-0 m-auto">
    <video
      class="absolute inset-0 m-auto"
      autoplay
      loop
      muted
      playsinline
      id="main-video"
      preload="metadata"
    >
      <source src="/sky-video.mp4" type="video/mp4" />
    </video>
  </div>

  <ScrollButton color="text-white"/>
  
</section>

<style>
  .mask {
    width: 90vw;

    -webkit-mask-image: url("./dream.svg");
    -webkit-mask-position: center center;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: contain;

    mask-image: url("./dream.svg");
    mask-position: 50% 45%;
    mask-repeat: no-repeat;
    mask-size: contain;
  }
  .mask video {
    width: 100%;
  }

</style>

<script>
  // @ts-nocheck
  // const svg = document.querySelector("svg.sketch")
  // const path = svg.querySelector("path")

  // const pathLenght = path.getTotalLength()

  // const scroll = () => {
  //   const distance = window.scrollY
  //   const totalDistance = window.innerHeight / 2

  //   const percentage = distance / totalDistance

  //   // console.log(`Distance: ${distance} / Total distance: ${totalDistance} / Percentage: ${percentage}`)
    
  //   path.style.strokeDasharray = pathLenght
  //   path.style.strokeDashoffset =  pathLenght * (1 - percentage)
  // }
  // scroll()
  // window.addEventListener("scroll", scroll)
</script>